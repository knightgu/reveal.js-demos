<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Chalkboard with Reveal.js</title>

	<meta name="description" content="A plugin for reveal.js">
	<meta name="author" content="Asvin Goel">

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="../reveal.js/dist/reveal.css">
	<link rel="stylesheet" href="../reveal.js/dist/theme/black.css" id="theme">
	<link rel="stylesheet" href="../reveal.js/plugin/highlight/zenburn.css">
	<link rel="stylesheet" href="../reveal.js-plugins/chalkboard/style.css">

	<script src="../reveal.js/dist/reveal.js"></script>
        <script src="../reveal.js/plugin/markdown/markdown.js"></script>
	<script src="../reveal.js/plugin/highlight/highlight.js"></script>
	<script src="../reveal.js-plugins/menu/menu.js"></script>
	<script src="../reveal.js-plugins/chalkboard/plugin.js"></script>
	<script src="../reveal.js-plugins/audio-slideshow/plugin.js"></script>
	<script src="../reveal.js-plugins/audio-slideshow/RecordRTC.js"></script>
	<script src="../reveal.js-plugins/audio-slideshow/recorder.js"></script>

	<!-- Font awesome -->
	<link rel="stylesheet" href="../reveal.js-plugins/menu/font-awesome/css/fontawesome.css">

	<script async defer src="https://buttons.github.io/buttons.js"></script>
</head>

<body>

	<div class="reveal">
		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">
			<section data-audio-text="This is a demo of the chalkboard plugin for Reveal js">
				<h1>Chalkboard with Reveal.js</h1>
				<p>
					<small>Created by <a href="http://www.telematique.eu" >Asvin Goel</a></small>
				</p>

				<p>Please click the play button below.</p>

			</section>
			<section data-audio-text="Have you ever missed the traditional classroom experience where you can quickly sketch something on a chalkboard?">
				<h2>Hey there</h2>
				<p> 
					Have you ever missed the traditional classroom experience where you can quickly sketch something on a chalkboard?
				</p>
				<p class="fragment" data-fragment-index=0 data-audio-advance="false" data-audio-text="Just press b or click on the pencil in a square button to open and close your chalkboard. After you are done please advance to the next slide and click the play button.">
					Just press 'b' or click on the &nbsp;<i class="fa fa-pen-square"></i>&nbsp; button to open and close your chalkboard. 
				</p>
				<form name="theme" class="fragment" data-fragment-index=0 style="font-size: 20px">
					Select appearance: 
					<input type="radio" name="theme" value="chalkboard" onclick="changeTheme(this);" checked autocomplete="off"> Chalkboard</input>
					<input type="radio" name="theme" value="whiteboard" onclick="changeTheme(this);" autocomplete="off"> Whiteboard</input>
				</form>
				<p class="fragment" style="color:dimgray; font-size: 20px" data-fragment-index=0 data-audio-text="Just press b or click on the pencil in a square button to open and close your chalkboard. After you are done please advance to the next slide and click the play button.">
					After you are done please advance to the next slide and click the play button again.
				</p>
			</section>
			<section data-audio-text="Drawing is easy. Just click the left or right mouse button and drag to write on or wipe the chalkboard. With the delete key you can clear the chalkboard.">
				<h2>Easy to use</h2>
				<ul> 
					<li> Click the left mouse button to write on the chalkboard</li>
					<li> Click the right mouse button to wipe the chalkboard</li>
					<li> Click the 'DEL' key to clear the chalkboard </li>
				</ul>
			</section>
			<section data-audio-text="The plugin also has basic touch support.">
				<h2>Touch support</h2>
				<ul> 
					<li> Touch and drag to write on the chalkboard</li>
					<li> Touch and hold, then drag to wipe the chalkboard</li>
				</ul>
			</section>
			<section data-audio-text="Did you notice the pencil button?">
				<h2>Make notes on slides</h2>
				<p> 
					Did you notice the &nbsp;<i class="fa fa-pen"></i>&nbsp; button? 
				</p>
				<p class="fragment" data-fragment-index=0  data-audio-advance="false" data-audio-text="By pressing c or clicking the pencil button you can start and stop the notes taking mode allowing you to write comments and notes directly on the slide. After you are done please advance to the next slide and click the play button.">
					By pressing 'c' or clicking the button you can start and stop the notes taking mode allowing you to write comments and notes directly on the slide.
				</p>
				<p class="fragment" style="color:dimgray; font-size: 20px" data-fragment-index=0 data-audio-text="By pressing c or clicking the pencil button you can start and stop the notes taking mode allowing you to write comments and notes directly on the slide. After you are done please advance to the next slide and click the play button.">
					After you are done please advance to the next slide and click the play button again.
				</p>
			</section>
			<section data-audio-text="By default, a drawing cannot be edited after navigating away from the slide.">
				<h2>Default settings</h2>
				<p>
					By default, a drawing cannot be edited after navigating away from the slide.
				</p>
				<p  class="fragment">
					Please check out <a href="https://github.com/rajgoel/reveal.js-plugins/chalkboard">Github</a> for a documentation of the settings.  
				</p>
			</section>
			<section>
			<section data-audio-text="The plugin records all drawings and you can download them in a JSON-file by pressing d">
				<h2>Playback</h2>
				<p>The plugin records all drawings and you can download them in a JSON-file by pressing 'd'.
				</p>
				<p class="fragment">The pre-recorded drawings can be added to the slideshow for playback.
				</p>
			</section>
			<section data-audio-text="If you are not an artist, you can also create a JSON-file based on an SVG image">  
				<h3>JSON-file</h3>
				<p>
					If you are not an artist, you can also create a JSON-file based on an SVG image.
				</p>

			</section>
			<section data-audio-text="Here is the image that has been used to create the chalkboard drawing on the previous slide">  
				<h3>Original image</h3>
				<img class="stretch" src="chalkboard/Manga_grayscale.svg" style="background-color:white;"></img>
				<p style="color:dimgray; font-size: 20px">
					Source: <a href="https://commons.wikimedia.org/wiki/File:Manga_grayscale.svg">Wikimedia</a>
				</p>

			</section>
			<section data-audio-text="First, the image has to be preprocessed e.g. with inkscape">  
				<h3>Preprocessing with <a href="https://inkscape.org">Inkscape</a></h3>
				<ul>
					<li>Remove all elements which are not lines, e.g. shadows</li>
					<li>Convert SVG path coordinates from relative to absolute (<a href="http://stackoverflow.com/questions/6890685/is-there-a-tool-to-convert-svg-line-paths-from-absolute-to-relative">see here</a>)</li>
					<li>Convert curves to lines (<a href="http://www.inkscapeforum.com/viewtopic.php?t=4308#p19653">see here</a>)</li>
				</ul>			
			</section>
			<section data-audio-text="This is the sample image">  
				<h3>Edited image</h3>
				<img class="stretch" src="chalkboard/Manga_lines.svg" style="background-color:white;"></img>
			</section>
			<section data-audio-text="The sample image can be translated with a python program  into a JSON-file">  
				<h3>Create JSON-file with python program</h3>
				<pre data-prevent-swipe  class="python"><code data-trim>
#!/usr/bin/python3
# Converts svg paths to line segments for chalkboard.json

import sys
from xml.etree import ElementTree

if len(sys.argv) < 3:
  print('Usage:  svg2chalkboard.py &#60;svg-file&#62; &#60;slide indices json&#62; &#60;page number&#62; [start time] [time step]');
  exit(1);

filename = sys.argv[1];
indices  = sys.argv[2];
page  = sys.argv[3];

if len(sys.argv) < 5:
  start = 0;
else: 
  start = int( sys.argv[4] );
if len(sys.argv) < 6:
  timestep = 30;
else: 
  timestep = int( sys.argv[5] );

tree = ElementTree.parse( filename )
root = tree.getroot()

print('[{"width":960,"height":700,"data":[]},{"width":' + root.attrib['width'] + ',"height":' + root.attrib['height'] + ',"data":[{"slide":' + indices + ',"page":' + page + ',"events":[');
print('{"type":"open","time":' + str(start) + ',"board":0}')

timestamp = start;
for path in root.findall('{http://www.w3.org/2000/svg}path'):
  curve = path.attrib['d'];
  if curve[0] == 'M':
    points = curve[1:].split('L');
    if len(points) > 1:
      origin = points[0].split();
      for i in range( 1,len(points) ):
        destination = points[i].split();
        print(',{"type":"draw","color":0,"x1":' + origin[0] + ',"y1":' + origin[1] + ',"x2":' + destination[0] + ',"y2":' + destination[1] + ',"time":' + str(timestamp) + ',"board":0}');
        timestamp = timestamp + timestep;
        origin = destination
print('],"duration":' + str(timestamp) + '}]}]');
</code></pre>
			</section>
			<section data-audio-text="The program is just a quick hack and you may have to adapt it to work for other SVG images">  
				<p>
					The program is just a rough quick and you may have to adapt it to work for other SVG images.
				</p>
			</section>
			</section>
			<section data-audio-text="All drawings on the chalkboard are included in the PDF-export.">
				<h2>Printouts</h2>
				<p>All drawings on the chalkboard are included in the <a href="chalkboard-demo.html?print-pdf">PDF-export</a>.
				</p>
  
			</section>
			<section data-audio-text="The chalk effect is based on chalkboard by Mohamed Moustafa">
				<h2>Credits</h2>
				<p> 
					The chalk effect is based on <a href="https://github.com/mmoustafa/Chalkboard">Chalkboard</a> by Mohamed Moustafa.
				<p>
			</section>
			<section data-audio-text="You can download the plugin on github. Do not forget to check out the other plugins.">
			<h2>The end</h2>

				<p>Check out other plugins by clicking on &nbsp;<a href="#" onclick="RevealMenu.toggle(); return false;"><i class="fa fa-bars"></i></a>&nbsp; and then on "Plugins <i class="fa fa-external-link-alt"></i>".</p>
				<p>Have a look at the source code & documentation on <a href="https://github.com/rajgoel/reveal.js-plugins">Github</a>.</p>
				<a aria-label="Download rajgoel/reveal.js-plugins on GitHub" data-style="mega" href="https://github.com/rajgoel/reveal.js-plugins/archive/master.zip" class="github-button">Download</a>
				<a aria-label="Star rajgoel/reveal.js-plugins on GitHub" data-count-aria-label="# stargazers on GitHub" data-count-api="/repos/rajgoel/reveal.js-plugins#stargazers_count" data-count-href="/rajgoel/reveal.js-plugins/stargazers" data-style="mega" href="https://github.com/rajgoel/reveal.js-plugins" class="github-button">Star</a>					
			</section>

		</div>
	</div>

	<script>
			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				mouseWheel: true,
				menu: { // Menu works best with font-awesome installed: sudo apt-get install fonts-font-awesome
					themes: false,
					transitions: false,
					markers: true,
					hideMissingTitles: true,
					custom: [
				            { title: 'Plugins', icon: '<i class="fa fa-external-link-alt"></i>', src: 'toc.html' },
				            { title: 'About', icon: '<i class="fa fa-info"></i>', src: 'about.html' }
				        ]
				},
				audio: {
					prefix: 'chalkboard/',
					suffix: '.ogg',
					defaultDuration: 5,
//					textToSpeechURL: "http://api.voicerss.org/?key=[YOUR_KEY]&hl=en-gb&c=ogg&src=",
					advance: 500,
					autoplay: false,
					defaultText: true,
					playerOpacity: 0.2,
				},
				chalkboard: { // font-awesome.min.css must be available
					src: "chalkboard/chalkboard.json",
					storage: "chalkboard-demo",
					toggleChalkboardButton: { left: "80px" },
					toggleNotesButton: { left: "130px" },
					colorButtons: 5
				},
				plugins: [ RevealMarkdown, RevealMenu, RevealHighlight, RevealChalkboard, RevealAudioSlideshow, RevealAudioRecorder ],
			});

		function changeTheme(input) {
			var config = {};
			config.theme = input.value;
			Reveal.getPlugin("RevealChalkboard").configure(config);
			input.blur();
		}
	</script>
<a href="https://github.com/rajgoel/reveal.js-plugins"><img style="position: absolute; top: 0; left: 0; border: 0;" src="forkme.png"></a>
</body>
</html>
